import streamlit as st
from hugchat import hugchat
from hugchat.login import Login
from PIL import Image
from botTemplates import css, bot_template, user_template

def add_logo(logo_path, width, height):
    """Read and return a resized logo"""
    logo = Image.open(logo_path)
    modified_logo = logo.resize((width, height))
    return modified_logo
    
# App title
st.set_page_config(page_title="🤗💬 Munna Bhai MBBS !")
my_logo = add_logo(logo_path="img/munnabhai_1.jpg", width=280, height=239)
#my_logo = add_logo(logo_path="img/streamlit.png", width=280, height=239)

# Hugging Face Credentials
with st.sidebar:
    st.title('🤗💬 Chat with Bhai')
    st.sidebar.image(my_logo)
    if ('EMAIL' in st.secrets) and ('PASS' in st.secrets):
        st.success('HuggingFace Login credentials already provided!', icon='✅')
        hf_email = st.secrets['EMAIL']
        hf_pass = st.secrets['PASS']
    else:
        hf_email = st.text_input('Enter E-mail:', type='password')
        hf_pass = st.text_input('Enter password:', type='password')
        if not (hf_email and hf_pass):
            st.warning('Please enter your credentials!', icon='⚠️')
        else:
            st.success('Proceed to entering your prompt message!', icon='👉')
    st.markdown('📖 My LinkedIn Profile [LinkedIn](https://www.linkedin.com/in/mbaig162/)!')
    st.markdown('📖 Generative AI - Image to Speech [demo](https://www.loom.com/share/1a39ba984dbc4f8d98255bc19cf98255?sid=5f322694-1162-45c5-a63f-03f9127b94c9/)!')
    st.markdown('📖 Chat with your document [demo](https://www.loom.com/share/a0175fbad3024c52aecb4aa92754ad74?sid=acf6a0ca-e355-41d6-a045-860f9caf9974/)!')
    st.markdown('📖 Learn how to build this app from dataprofessor in his [blog] (https://blog.streamlit.io/how-to-build-an-llm-powered-chatbot-with-streamlit/)!')   
    
# Store LLM generated responses
if "messages" not in st.session_state.keys():
    initial_content =  '''
        <div class="chat-message bot">
            <div class="avatar">
               <img style="max-height: 78px; max-width: 78px; border-radius: 50%; object-fit: cover;" src="data:image/jpeg;base64,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">
            </div>
            <div class="message">Tension nahi leneka, bhai !   Batao, apun kaise madad kar sakta hai?</div>
        </div>
        '''
    st.session_state.messages = [{"role": "assistant", "content": initial_content}]

# Display chat messages
for message in st.session_state.messages:
    with st.chat_message(message["role"]):
        #st.write(bot_template.replace("{{MSG}}", message["content"]), unsafe_allow_html=True)
        st.write(message["content"])

# Function for generating LLM response
def generate_response(prompt_input, email, passwd):
    # Hugging Face Login
    sign = Login(email, passwd)
    cookies = sign.login()
    #sign.saveCookies()
    # Create ChatBot                        
    chatbot = hugchat.ChatBot(cookies=cookies.get_dict())
    prompt_template = f"""Imagine yourself as a bollywood movie character Munna Bhai MBBS and answer the User prompt in a Munna Bhai's style. User prompt:{prompt_input}
    """
    return chatbot.chat(prompt_template)

# User-provided prompt
if prompt := st.chat_input(disabled=not (hf_email and hf_pass)):
    st.session_state.messages.append({"role": "user", "content": prompt})
    with st.chat_message("user"):
        st.write(user_template.replace("{{MSG}}", prompt), unsafe_allow_html=True)

# Generate a new response if last message is not from assistant
if st.session_state.messages[-1]["role"] != "assistant":
    #with st.chat_message("assistant"):
    with st.chat_message("assistant"):
        with st.spinner("Bhai, abhi thoda time lagega, apun soch raha hai..."):
            response = generate_response(prompt, hf_email, hf_pass) 
            st.write(bot_template.replace("{{MSG}}", response), unsafe_allow_html=True)
    message = {"role": "assistant", "content": response}
    st.session_state.messages.append(message)
